!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(n.geometric={})}(this,function(n){"use strict";function r(n){return 180*n/Math.PI}function t(n){return r(Math.atan2(n[1][1]-n[0][1],n[1][0]-n[0][0]))}function e(n){return Math.sqrt(Math.pow(n[1][0]-n[0][0],2)+Math.pow(n[1][1]-n[0][1],2))}function o(n){return n/180*Math.PI}function u(n,r,t){var e=o(r);return[n[0]+t*Math.cos(e),n[1]+t*Math.sin(e)]}function a(n){return function(r){return 0===r?n[0]:1===r?n[1]:u(n[0],t(n),e(n)*r)}}function i(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}function f(n,r,t){function e(n,r){return[n[0]*Math.cos(r)-n[1]*Math.sin(r),n[0]*Math.sin(r)+n[1]*Math.cos(r)]}var u=o(r);return!t||0===t[0]&&0===t[1]?e(n,u):e(n.map(function(n,r){return n-t[r]}),u).map(function(n,r){return n+t[r]})}function l(n){for(var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=0,e=0,o=n.length;e<o;e++){var u=n[e],a=n[e===o-1?0:e+1];t+=u[0]*a[1],t-=a[0]*u[1]}return r?t/2:Math.abs(t/2)}function c(n){if(n.length<3)return null;for(var r=1/0,t=-1/0,e=1/0,o=-1/0,u=!1,a=0,i=n.length;a<i;a++){var f=n[a],l=f[0],c=f[1];null!=l&&isFinite(l)&&null!=c&&isFinite(c)&&(u=!0,l<r&&(r=l),l>t&&(t=l),c<e&&(e=c),c>o&&(o=c))}return u?[[r,e],[t,o]]:null}function h(n){for(var r=0,t=0,e=0,o=n.length,u=0;u<o;u++){var a=u===o-1?0:u+1,i=n[u],f=n[a],l=i[0]*f[1]-f[0]*i[1];r+=l,t+=(i[0]+f[0])*l,e+=(i[1]+f[1])*l}var c=3*r;return[t/c,e/c]}function g(n,r,t){return(n[0]-t[0])*(r[1]-t[1])-(n[1]-t[1])*(r[0]-t[0])}function v(n){if(n.length<3)return null;for(var r=n.slice().sort(function(n,r){return n[0]===r[0]?n[1]-r[1]:n[0]-r[0]}),t=[],e=0;e<r.length;e++){for(;t.length>=2&&g(t[t.length-2],t[t.length-1],r[e])<=0;)t.pop();t.push(r[e])}for(var o=[],u=r.length-1;u>=0;u--){for(;o.length>=2&&g(o[o.length-2],o[o.length-1],r[u])<=0;)o.pop();o.push(r[u])}return o.pop(),t.pop(),t.concat(o)}function p(n,r){return d(n)||m(n,r)||I()}function s(n){return y(n)||M(n)||b()}function y(n){if(Array.isArray(n)){for(var r=0,t=new Array(n.length);r<n.length;r++)t[r]=n[r];return t}}function d(n){if(Array.isArray(n))return n}function M(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}function m(n,r){var t=[],e=!0,o=!1,u=void 0;try{for(var a,i=n[Symbol.iterator]();!(e=(a=i.next()).done)&&(t.push(a.value),!r||t.length!==r);e=!0);}catch(n){o=!0,u=n}finally{try{e||null==i.return||i.return()}finally{if(o)throw u}}return t}function b(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function I(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function A(n){return w(n)?n:[].concat(s(n),[n[0]])}function w(n){var r=n[0],t=n[n.length-1];return r[0]===t[0]&&r[1]===t[1]}function P(n){if(0===n.length)return 0;for(var r,t,e=-1,o=n.length,u=n[o-1],a=u[0],i=u[1],f=0;++e<o;)r=a,t=i,u=n[e],a=u[0],i=u[1],r-=a,t-=i,f+=Math.sqrt(r*r+t*t);return f}function k(n){return function(r){if(r<=0)return n[0];var o=A(n);if(r>=1)return o[o.length-1];for(var a=P(o)*r,i=[],f=0,l=0;l<o.length-1;l++){var c=[o[l],o[l+1]],h=e(c),g=t(c),v=a-(f+=h);if(v<0){i=u(c[0],g,h+v);break}l===n.length-2&&(i=u(c[0],g,v))}return i}}function L(n){for(var r=0,t=0,e=n.length,o=0;o<e;o++){var u=n[o];r+=u[0],t+=u[1]}return[r/e,t/e]}function R(n,r,o){o||(o=h(n));for(var a=[],i=0,f=n.length;i<f;i++){var l=n[i],c=e([o,l]),g=t([o,l]);a[i]=u(o,g,c*Math.sqrt(r))}return a}function S(n,r,t){for(var e=[],o=0,a=n.length;o<a;o++)e[o]=u(n[o],r,t);return e}function T(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],u=Math.sqrt(r/Math.PI),a=Array.from({length:n},function(){return 2*u*Math.random()}),i=Array.from({length:n},function(){return 2*u*Math.random()});a.sort(function(n,r){return n-r}),i.sort(function(n,r){return n-r});var f=j(a,a[0],a[a.length-1]),c=j(i,i[0],i[i.length-1]);q(c);var g=[],v=0,p=0,s=(f.map(function(n,r){return[n,c[r]]}).sort(function(n,r){return Math.atan2(r[1],r[0])-Math.atan2(n[1],n[0])}).forEach(function(n){v+=1*n[0],p+=1*n[1],g.push([v,p])}),h(g));return S(R(g,r/l(g)),t([s,o]),e([s,o]))}function j(n,r,t){for(var e=r,o=r,u=[],a=1;a<n.length-1;a++){var i=n[a];Math.random()>.5?(u.push(i-e),e=i):(u.push(o-i),o=i)}return u.push(t-e),u.push(o-t),u}function q(n){for(var r=n.length-1;r>0;r--){var t=Math.floor(Math.random()*(r+1)),e=[n[t],n[r]];n[r]=e[0],n[t]=e[1]}}function O(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments.length>2?arguments[2]:void 0,a=[],i=[0,0],f=[0,0],l=0,c=0;c<n;c++)a[c]=i,f[0]+=i[0],f[1]+=i[1],i=u(i,l,Math.sqrt(4*r*Math.tan(Math.PI/n)/n)),l-=360/n;if(o){var h=[[f[0]/n,f[1]/n],o];a=S(a,t(h),e(h))}return a}function x(n,r,t){for(var e=[],o=0,u=n.length;o<u;o++)e[o]=f(n[o],r,t);return e}function E(n,r,o){o||(o=h(n));for(var a=[],i=0,f=n.length;i<f;i++){var l=n[i],c=e([o,l]),g=t([o,l]);a[i]=u(o,g,c*r)}return a}function F(n,r,o){o||(o=h(n));for(var a=[],i=0,f=n.length;i<f;i++){var l=n[i],c=e([o,l]),g=t([o,l]),v=u(o,g,c*r);a[i]=[v[0],l[1]]}return a}function W(n,r,o){o||(o=h(n));for(var a=[],i=0,f=n.length;i<f;i++){var l=n[i],c=e([o,l]),g=t([o,l]),v=u(o,g,c*r);a[i]=[l[0],v[1]]}return a}function _(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ccw";if(n.length<3)return null;var t=n.slice().reverse(),e=l(n,!0)>0;return"cw"===r||"clockwise"===r?e?n:t:e?t:n}function B(n){return n[1][1]>n[0][1]?n:[n[1],n[0]]}function C(n,r){var t=B(r);return g(n,t[1],t[0])<0}function D(n,r){var t=B(r);return g(n,t[1],t[0])>0}function H(n,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=e(r);return X(n,r,t)&&e([r[0],n])<=o&&e([r[1],n])<=o}function X(n,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.abs(g(n,r[0],r[1]))<=t}function Y(n,r){var t=p(n,2),e=p(t[0],2),o=e[0],u=e[1],a=p(t[1],2),i=a[0],f=a[1],l=p(r,2),c=p(l[0],2),h=c[0],g=c[1],v=p(l[1],2),s=v[0],y=v[1];if(o===h&&u===g)return!0;if(i===s&&f===y)return!0;if(H(n[0],r)||H(n[1],r))return!0;if(H(r[0],n)||H(r[1],n))return!0;var d=(y-g)*(i-o)-(s-h)*(f-u);if(0===d)return!1;var M=u-g,m=o-h,b=(s-h)*M-(y-g)*m,I=(i-o)*M-(f-u)*m,A=b/d,w=I/d;return A>0&&A<1&&w>0&&w<1}function z(n,r){for(var t=!1,e=A(r),o=0,u=e.length-1;o<u;o++){var a=e[o],i=e[o+1];if(Y(n,[a,i])||H(a,n)&&H(i,n)){t=!0;break}}return t}function G(n,r){for(var t=n[0],e=n[1],o=!1,u=0,a=r.length-1;u<r.length;a=u++){var i=r[u][0],f=r[u][1],l=r[a][0],c=r[a][1];f>e!=c>e&&t<(l-i)*(e-f)/(c-f)+i&&(o=!o)}return o}function J(n,r){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=!1,o=A(r),u=0,a=o.length-1;u<a;u++)if(H(n,[o[u],o[u+1]],t)){e=!0;break}return e}function K(n,r){for(var t=!0,e=A(n),o=0,u=e.length-1;o<u;o++){var a=e[o];if(!G(a,r)){t=!1;break}if(z([a,e[o+1]],r)){t=!1;break}}return t}function N(n,r){for(var t=!1,e=0,o=A(n),u=0,a=o.length-1;u<a;u++){var i=o[u];if(z([i,o[u+1]],r)){t=!0;break}if(J(i,r)&&++e,2===e){t=!0;break}}return t}function Q(n,r){var t=2*r-n;return t>=360?t-360:t<0?t+360:t}n.lineAngle=t,n.lineInterpolate=a,n.lineLength=e,n.lineMidpoint=i,n.pointRotate=f,n.pointTranslate=u,n.polygonArea=l,n.polygonBounds=c,n.polygonCentroid=h,n.polygonHull=v,n.polygonInterpolate=k,n.polygonLength=P,n.polygonMean=L,n.polygonRandom=T,n.polygonRegular=O,n.polygonRotate=x,n.polygonScale=E,n.polygonScaleArea=R,n.polygonScaleX=F,n.polygonScaleY=W,n.polygonTranslate=S,n.polygonWind=_,n.lineIntersectsLine=Y,n.lineIntersectsPolygon=z,n.pointInPolygon=G,n.pointOnPolygon=J,n.pointLeftofLine=C,n.pointRightofLine=D,n.pointOnLine=H,n.pointWithLine=X,n.polygonInPolygon=K,n.polygonIntersectsPolygon=N,n.angleReflect=Q,n.angleToDegrees=r,n.angleToRadians=o,Object.defineProperty(n,"__esModule",{value:!0})});