!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.geometric={})}(this,function(n){"use strict";function t(n){return 180*n/Math.PI}function r(n){return t(Math.atan2(n[1][1]-n[0][1],n[1][0]-n[0][0]))}function e(n,t){return i(n)||l(n,t)||c()}function o(n){return a(n)||u(n)||f()}function a(n){if(Array.isArray(n)){for(var t=0,r=new Array(n.length);t<n.length;t++)r[t]=n[t];return r}}function i(n){if(Array.isArray(n))return n}function u(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}function l(n,t){var r=[],e=!0,o=!1,a=void 0;try{for(var i,u=n[Symbol.iterator]();!(e=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);e=!0);}catch(n){o=!0,a=n}finally{try{e||null==u.return||u.return()}finally{if(o)throw a}}return r}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function h(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e(n,2),o=e(r[0],2),a=o[0],i=o[1],u=e(r[1],2),l=u[0],f=u[1],c=g([0,1],[a,l]),h=g([0,1],[i,f]);return function(n){var r=t?n<0?0:n>1?1:n:n;return[c(r),h(r)]}}function g(n,t){var r=e(n,2),o=r[0],a=r[1],i=e(t,2),u=i[0],l=i[1],f=a-o,c=l-u;return function(n){return c*((n-o)/f)+u}}function v(n){return Math.sqrt(Math.pow(n[1][0]-n[0][0],2)+Math.pow(n[1][1]-n[0][1],2))}function p(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}function s(n){return n/180*Math.PI}function y(n,t,r){var e=s(t||0);return!r||0===r[0]&&0===r[1]?d(n,e):d(n.map(function(n,t){return n-r[t]}),e).map(function(n,t){return n+r[t]})}function d(n,t){return[n[0]*Math.cos(t)-n[1]*Math.sin(t),n[0]*Math.sin(t)+n[1]*Math.cos(t)]}function M(n,t,r){return n.map(function(e){return y(e,t,r||p(n))})}function m(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=s(t);return[n[0]+r*Math.cos(e),n[1]+r*Math.sin(e)]}function b(n,t,r){return n.map(function(n){return m(n,t,r)})}function I(n){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=0,e=0,o=n.length;e<o;e++){var a=n[e],i=n[e===o-1?0:e+1];r+=a[0]*i[1],r-=i[0]*a[1]}return t?r/2:Math.abs(r/2)}function A(n){if(n.length<3)return null;for(var t=1/0,r=-1/0,e=1/0,o=-1/0,a=!1,i=0,u=n.length;i<u;i++){var l=n[i],f=l[0],c=l[1];null!=f&&isFinite(f)&&null!=c&&isFinite(c)&&(a=!0,f<t&&(t=f),f>r&&(r=f),c<e&&(e=c),c>o&&(o=c))}return a?[[t,e],[r,o]]:null}function w(n){for(var t=0,r=0,e=0,o=n.length,a=0;a<o;a++){var i=a===o-1?0:a+1,u=n[a],l=n[i],f=u[0]*l[1]-l[0]*u[1];t+=f,r+=(u[0]+l[0])*f,e+=(u[1]+l[1])*f}var c=3*t;return[r/c,e/c]}function P(n,t,r){return(n[0]-r[0])*(t[1]-r[1])-(n[1]-r[1])*(t[0]-r[0])}function R(n){if(n.length<3)return null;for(var t=n.slice().sort(function(n,t){return n[0]===t[0]?n[1]-t[1]:n[0]-t[0]}),r=[],e=0;e<t.length;e++){for(;r.length>=2&&P(r[r.length-2],r[r.length-1],t[e])<=0;)r.pop();r.push(t[e])}for(var o=[],a=t.length-1;a>=0;a--){for(;o.length>=2&&P(o[o.length-2],o[o.length-1],t[a])<=0;)o.pop();o.push(t[a])}return o.pop(),r.pop(),r.concat(o)}function k(n){return L(n)?n:[].concat(o(n),[n[0]])}function L(n){var t=n[0],r=n[n.length-1];return t[0]===r[0]&&t[1]===r[1]}function S(n){if(0===n.length)return 0;for(var t,r,e=-1,o=n.length,a=n[o-1],i=a[0],u=a[1],l=0;++e<o;)t=i,r=u,a=n[e],i=a[0],u=a[1],t-=i,r-=u,l+=Math.sqrt(t*t+r*r);return l}function T(n){return function(t){if(t<=0)return n[0];var e=k(n);if(t>=1)return e[e.length-1];for(var o=S(e)*t,a=[],i=0,u=0;u<e.length-1;u++){var l=[e[u],e[u+1]],f=v(l),c=r(l),h=o-(i+=f);if(h<0){a=m(l[0],c,f+h);break}u===n.length-2&&(a=m(l[0],c,h))}return a}}function x(n){for(var t=0,r=0,e=n.length,o=0;o<e;o++){var a=n[o];t+=a[0],r+=a[1]}return[t/e,r/e]}function j(n,t,e){e||(e=w(n));for(var o=[],a=0,i=n.length;a<i;a++){var u=n[a],l=v([e,u]),f=r([e,u]);o[a]=m(e,f,l*Math.sqrt(t))}return o}function q(n,t,r){for(var e=[],o=0,a=n.length;o<a;o++)e[o]=m(n[o],t,r);return e}function O(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],o=Math.sqrt(t/Math.PI),a=Array.from({length:n},function(){return 2*o*Math.random()}),i=Array.from({length:n},function(){return 2*o*Math.random()});a.sort(function(n,t){return n-t}),i.sort(function(n,t){return n-t});var u=E(a,a[0],a[a.length-1]),l=E(i,i[0],i[i.length-1]);F(l);var f=[],c=0,h=0,g=(u.map(function(n,t){return[n,l[t]]}).sort(function(n,t){return Math.atan2(t[1],t[0])-Math.atan2(n[1],n[0])}).forEach(function(n){c+=1*n[0],h+=1*n[1],f.push([c,h])}),w(f));return q(j(f,t/I(f)),r([g,e]),v([g,e]))}function E(n,t,r){for(var e=t,o=t,a=[],i=1;i<n.length-1;i++){var u=n[i];Math.random()>.5?(a.push(u-e),e=u):(a.push(o-u),o=u)}return a.push(r-e),a.push(o-r),a}function F(n){for(var t=n.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),e=[n[r],n[t]];n[t]=e[0],n[r]=e[1]}}function W(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=A(n),o=e(r,2),a=e(o[0],2),i=a[0],u=(a[1],e(o[1],2)),l=u[0],f=(u[1],[]),c=0,g=n.length;c<g;c++){var v=e(n[c],2),p=v[0],s=v[1],y=[i+l-p,s];if(0===t)f[c]=[p,s];else if(1===t)f[c]=y;else{var d=h([[p,s],y]);f[c]=d(Math.max(Math.min(t,1),0))}}return f}function X(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=A(n),o=e(r,2),a=e(o[0],2),i=(a[0],a[1]),u=e(o[1],2),l=(u[0],u[1]),f=[],c=0,g=n.length;c<g;c++){var v=e(n[c],2),p=v[0],s=v[1],y=[p,i+l-s];if(0===t)f[c]=[p,s];else if(1===t)f[c]=y;else{var d=h([[p,s],y]);f[c]=d(Math.max(Math.min(t,1),0))}}return f}function Y(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,e=arguments.length>2?arguments[2]:void 0,o=[],a=[0,0],i=[0,0],u=0,l=0;l<n;l++)o[l]=a,i[0]+=a[0],i[1]+=a[1],a=m(a,u,Math.sqrt(4*t*Math.tan(Math.PI/n)/n)),u-=360/n;if(e){var f=[[i[0]/n,i[1]/n],e];o=q(o,r(f),v(f))}return o}function _(n,t,r){for(var e=[],o=0,a=n.length;o<a;o++)e[o]=y(n[o],t,r);return e}function B(n,t,e){e||(e=w(n));for(var o=[],a=0,i=n.length;a<i;a++){var u=n[a],l=v([e,u]),f=r([e,u]);o[a]=m(e,f,l*t)}return o}function C(n,t,e){e||(e=w(n));for(var o=[],a=0,i=n.length;a<i;a++){var u=n[a],l=v([e,u]),f=r([e,u]),c=m(e,f,l*t);o[a]=[c[0],u[1]]}return o}function D(n,t,e){e||(e=w(n));for(var o=[],a=0,i=n.length;a<i;a++){var u=n[a],l=v([e,u]),f=r([e,u]),c=m(e,f,l*t);o[a]=[u[0],c[1]]}return o}function H(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ccw";if(n.length<3)return null;var r=n.slice().reverse(),e=I(n,!0)>0;return"cw"===t||"clockwise"===t?e?n:r:e?r:n}function z(n){return n[1][1]>n[0][1]?n:[n[1],n[0]]}function G(n,t){var r=z(t);return P(n,r[1],r[0])<0}function J(n,t){var r=z(t);return P(n,r[1],r[0])>0}function K(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=v(t);return N(n,t,r)&&v([t[0],n])<=e&&v([t[1],n])<=e}function N(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.abs(P(n,t[0],t[1]))<=r}function Q(n,t){var r=e(n,2),o=e(r[0],2),a=o[0],i=o[1],u=e(r[1],2),l=u[0],f=u[1],c=e(t,2),h=e(c[0],2),g=h[0],v=h[1],p=e(c[1],2),s=p[0],y=p[1];if(a===g&&i===v)return!0;if(l===s&&f===y)return!0;if(K(n[0],t)||K(n[1],t))return!0;if(K(t[0],n)||K(t[1],n))return!0;var d=(y-v)*(l-a)-(s-g)*(f-i);if(0===d)return!1;var M=i-v,m=a-g,b=(s-g)*M-(y-v)*m,I=(l-a)*M-(f-i)*m,A=b/d,w=I/d;return A>0&&A<1&&w>0&&w<1}function U(n,t){for(var r=!1,e=k(t),o=0,a=e.length-1;o<a;o++){var i=e[o],u=e[o+1];if(Q(n,[i,u])||K(i,n)&&K(u,n)){r=!0;break}}return r}function V(n,t){for(var r=n[0],e=n[1],o=!1,a=0,i=t.length-1;a<t.length;i=a++){var u=t[a][0],l=t[a][1],f=t[i][0],c=t[i][1];l>e!=c>e&&r<(f-u)*(e-l)/(c-l)+u&&(o=!o)}return o}function Z(n,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=!1,o=k(t),a=0,i=o.length-1;a<i;a++)if(K(n,[o[a],o[a+1]],r)){e=!0;break}return e}function $(n,t){for(var r=!0,e=k(n),o=0,a=e.length-1;o<a;o++){var i=e[o];if(!V(i,t)){r=!1;break}if(U([i,e[o+1]],t)){r=!1;break}}return r}function nn(n,t){for(var r=!1,e=0,o=k(n),a=0,i=o.length-1;a<i;a++){var u=o[a];if(U([u,o[a+1]],t)){r=!0;break}if(Z(u,t)&&++e,2===e){r=!0;break}}return r}function tn(n,t){var r=2*t-n;return r>=360?r-360:r<0?r+360:r}n.lineAngle=r,n.lineInterpolate=h,n.lineLength=v,n.lineMidpoint=p,n.lineRotate=M,n.lineTranslate=b,n.pointRotate=y,n.pointTranslate=m,n.polygonArea=I,n.polygonBounds=A,n.polygonCentroid=w,n.polygonHull=R,n.polygonInterpolate=T,n.polygonLength=S,n.polygonMean=x,n.polygonRandom=O,n.polygonReflectX=W,n.polygonReflectY=X,n.polygonRegular=Y,n.polygonRotate=_,n.polygonScale=B,n.polygonScaleArea=j,n.polygonScaleX=C,n.polygonScaleY=D,n.polygonTranslate=q,n.polygonWind=H,n.lineIntersectsLine=Q,n.lineIntersectsPolygon=U,n.pointInPolygon=V,n.pointOnPolygon=Z,n.pointLeftofLine=G,n.pointRightofLine=J,n.pointOnLine=K,n.pointWithLine=N,n.polygonInPolygon=$,n.polygonIntersectsPolygon=nn,n.angleReflect=tn,n.angleToDegrees=t,n.angleToRadians=s,Object.defineProperty(n,"__esModule",{value:!0})});